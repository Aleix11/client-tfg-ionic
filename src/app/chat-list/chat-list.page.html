<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <div text-center>
      <img style="margin-top: 2px" text-center
           src="../../assets/Logo e-bet.png" height="30"/>
    </div>
    <ion-buttons slot="end">
      <ion-button (click)="modalCreateChat()">
        <ion-icon name="add"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12" no-padding>
        <!--style="max-height: 400px; overflow-y: scroll;"-->
        <ion-list>
          <ion-item *ngFor="let chat of chats"
                    class="dark-background"
                    no-padding
                    (click)="openChatFromUsers(chat.users)">
            <ion-row *ngIf="chat.users[0].userId !== user._id">
              <ion-col size="3" class="no-pad-top no-pad-bot">
                <ion-avatar>
                  <img *ngIf="chat.users[0].userFoto" src="{{chat.users[0].userFoto}}"/>
                  <img *ngIf="!chat.users[0].userFoto" src="../../assets/icon/favicon.png"/>
                </ion-avatar>
              </ion-col>
              <ion-col size="5" class="no-pad-top no-pad-bot small-pad-left">
                <ion-label>
                  {{chat.users[0].userName}}
                  <p> {{chat.lastMessage}} </p>
                </ion-label>
              </ion-col>
              <ion-col size="4" class="time-chat no-pad-top no-pad-bot no-pad-right"
                       *ngIf="chat.lastMessageDate">
                <div class="time-chat">
                  {{chat.lastMessageDateString}}
                </div>
              </ion-col>
              <!--<ion-col col-4 class="time-chat no-pad-top no-pad-bot no-pad-right"
                       *ngIf="chat.lastMessageDate">
                <div class="time-chat">
                  {{chat.lastMessageDate | date:'shortTime'}}
                </div>
              </ion-col>-->
              <ion-col size="4" class="no-pad-top no-pad-bot no-pad-right"
                       *ngIf="!chat.lastMessageDate">
                <div class="time-chat">Never</div>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="chat.users[1].userId !== user._id">
              <ion-col size="3" class="no-pad-top no-pad-bot">
                <ion-avatar>
                  <img *ngIf="chat.users[1].userFoto" src="{{chat.users[1].userFoto}}"/>
                  <img *ngIf="!chat.users[1].userFoto" src="../../assets/icon/favicon.png"/>
                </ion-avatar>
              </ion-col>
              <ion-col size="5" class="no-pad-top no-pad-bot small-pad-left">
                <ion-label>
                  {{chat.users[1].userName}}
                  <p> {{chat.lastMessage}} </p>
                </ion-label>
              </ion-col>
              <ion-col size="4" class="time-chat no-pad-top no-pad-bot no-pad-right"
                       *ngIf="chat.lastMessageDate">
                <div class="time-chat">
                  {{chat.lastMessageDateString}}
                </div>
              </ion-col>
              <!--<ion-col col-4 class="time-chat no-pad-top no-pad-bot no-pad-right"
                       *ngIf="chat.lastMessageDate">
                <div class="time-chat">
                  {{chat.lastMessageDate | date:'shortTime'}}
                </div>
              </ion-col>-->
              <ion-col size="4" class="no-pad-top no-pad-bot no-pad-right"
                       *ngIf="!chat.lastMessageDate">
                <div class="time-chat">Never</div>
              </ion-col>
            </ion-row>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<!--<ion-col col-6>
              <b *ngIf="chat.connected" style="color: greenyellow">Conectado</b>
              <b *ngIf="!chat.connected" style="color: darkred">No Conectado</b>
            </ion-col>-->